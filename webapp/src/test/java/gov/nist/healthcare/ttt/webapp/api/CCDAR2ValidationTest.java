package gov.nist.healthcare.ttt.webapp.api;

import java.util.ArrayList;

import org.sitenv.referenceccda.validator.RefCCDAValidationResult;
import org.sitenv.referenceccda.validator.ReferenceCCDAValidator;

public class CCDAR2ValidationTest {
	
	public static void main(String[] args) {
		String ccdaFile = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><ClinicalDocument xmlns=\"urn:hl7-org:v3\"><realmCode code=\"US\" /><typeId extension=\"POCD_HD000040\" root=\"2.16.840.1.113883.1.3\" /><templateId root=\"1.2.840.114350.1.72.1.51693\" /><templateId root=\"2.16.840.1.113883.10\" extension=\"IMPL_CDAR2_LEVEL1\" /><templateId root=\"2.16.840.1.113883.10.20.3\" /><templateId root=\"2.16.840.1.113883.10.20.1\" /><templateId root=\"2.16.840.1.113883.3.88.11.32.1\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.1.5\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.1.2\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.1.1\" /><id assigningAuthorityName=\"EPC\" root=\"1.2.840.114350.1.13.5325.1.7.8.688883.18681\" /><code code=\"34133-9\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Summarization of Episode Note\" /><title>Continuity of Care Document</title><effectiveTime value=\"20150218165839-0600\" /><confidentialityCode code=\"N\" codeSystem=\"2.16.840.1.113883.5.25\" /><languageCode code=\"en-US\" /><setId assigningAuthorityName=\"EPC\" extension=\"90f1a6a6-2a11-11e4-ba10-d2068206269d\" root=\"1.2.840.114350.1.13.5325.1.7.1.1\" /><versionNumber value=\"60\" /><recordTarget><patientRole><id root=\"1.2.840.114350.1.13.5325.1.7.3.688884.100\" extension=\"IDC0046700\" /><id assigningAuthorityName=\"EPI\" root=\"1.2.840.114350.1.1\" extension=\"23439\" /><addr use=\"HP\"><streetAddressLine>111 PECK AVENUE</streetAddressLine><city>MADISON</city><state>WI</state><postalCode>53711</postalCode><country>USA</country></addr><telecom nullFlavor=\"UNK\" /><patient><name use=\"L\"><given>Frank</given><given>V</given><family>Peck</family></name><administrativeGenderCode code=\"M\" codeSystem=\"2.16.840.1.113883.5.1\" codeSystemName=\"AdministrativeGenderCode\" displayName=\"Male\" /><birthTime value=\"19200724\" /><maritalStatusCode nullFlavor=\"UNK\" /><raceCode nullFlavor=\"UNK\" /><ethnicGroupCode codeSystem=\"2.16.840.1.113883.6.238\" codeSystemName=\"CDC Race and Ethnicity\" nullFlavor=\"UNK\" /><languageCommunication><languageCode nullFlavor=\"UNK\" /></languageCommunication></patient><providerOrganization><id root=\"1.2.840.114350.1.13.5325.1.7.2.688879\" extension=\"5400\" /><name>IDE Current</name><telecom nullFlavor=\"NA\" /><addr><streetAddressLine>Wisconsin</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr></providerOrganization></patientRole></recordTarget><author><time value=\"20150218165839\" /><assignedAuthor><id nullFlavor=\"NA\" /><addr nullFlavor=\"NA\"><streetAddressLine nullFlavor=\"UNK\" /><city nullFlavor=\"UNK\" /></addr><telecom nullFlavor=\"NA\" /><assignedPerson><name nullFlavor=\"NA\" /></assignedPerson><representedOrganization><id root=\"1.2.840.114350.1.13.5325.1.7.2.688879\" extension=\"5400\" /><name>IDE Current</name><telecom nullFlavor=\"NA\" /><addr><streetAddressLine>Wisconsin</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr></representedOrganization></assignedAuthor></author><author><time value=\"20150218165839\" /><assignedAuthor><id root=\"1.2.840.114350.1.1\" extension=\"8.2\" /><addr nullFlavor=\"NA\"><streetAddressLine nullFlavor=\"UNK\" /><city nullFlavor=\"UNK\" /></addr><telecom nullFlavor=\"NA\" /><assignedAuthoringDevice><manufacturerModelName>Epic - Version 8.2</manufacturerModelName><softwareName>Epic - Version 8.2</softwareName></assignedAuthoringDevice><representedOrganization><id root=\"1.2.840.114350.1.13.5325.1.7.2.688879\" extension=\"5400\" /><name>IDE Current</name><telecom nullFlavor=\"NA\" /><addr><streetAddressLine>Wisconsin</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr></representedOrganization></assignedAuthor></author><custodian><assignedCustodian><representedCustodianOrganization><id root=\"1.2.840.114350.1.13.5325.1.7.2.688879\" extension=\"5400\" /><name>IDE Current</name><telecom nullFlavor=\"NA\" /><addr><streetAddressLine>Wisconsin</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr></representedCustodianOrganization></assignedCustodian></custodian><documentationOf typeCode=\"DOC\"><serviceEvent classCode=\"PCPR\"><effectiveTime><low value=\"19200724\" /><high value=\"20150218\" /></effectiveTime><performer typeCode=\"PRF\"><templateId root=\"2.16.840.1.113883.3.88.11.32.4\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.4\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.2.3\" /><functionCode code=\"PP\" codeSystem=\"2.16.840.1.113883.12.443\" codeSystemName=\"Provider Role\" displayName=\"Primary Care Provider\"><originalText>Primary Care Provider</originalText></functionCode><time><low value=\"20010101\" /><high nullFlavor=\"PINF\" /></time><assignedEntity><id nullFlavor=\"UNK\" /><addr use=\"WP\"><streetAddressLine>1234 1st street</streetAddressLine><streetAddressLine>Suite 1</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr><telecom use=\"WP\" value=\"tel:+1-608-555-9875\" /><assignedPerson><name><given>Ben</given><given>P</given><family>Ulmen</family></name></assignedPerson><representedOrganization><id root=\"1.2.840.114350.1.13.5325.1.7.2.688879\" extension=\"5400\" /><name>IDE Current</name><telecom nullFlavor=\"NA\" /><addr><streetAddressLine>Wisconsin</streetAddressLine><city>FITCHBURG</city><state>WI</state><postalCode>53719</postalCode><country>USA</country></addr></representedOrganization></assignedEntity></performer></serviceEvent></documentationOf><component><structuredBody><component><section><code code=\"X-DOCCMT\" displayName=\"Document Comments\" /><title>Source Comments</title><text>River Hills Health System is live on ambulatory and inpatient applications.<footnote>IDE Current</footnote></text></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.2\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.13\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.102\" /><id root=\"AD821F60-B7C1-11E4-8FA9-D2068206269D\" /><code code=\"48765-2\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Allergies, Adverse Reactions, Alerts\" /><title>Active Allergies and Adverse Reactions</title><text><content ID=\"nof2\">Not on File</content></text><entry><act classCode=\"ACT\" moodCode=\"EVN\" nullFlavor=\"ASKU\"><templateId root=\"2.16.840.1.113883.10.20.1.27\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5.1\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5.3\" /><templateId root=\"2.16.840.1.113883.3.88.11.32.6\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.6\" /><id nullFlavor=\"NA\" /><code nullFlavor=\"NA\" /><statusCode code=\"active\" /><effectiveTime><low nullFlavor=\"UNK\" /></effectiveTime><entryRelationship inversionInd=\"false\" typeCode=\"SUBJ\"><observation classCode=\"OBS\" moodCode=\"EVN\" negationInd=\"false\"><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.6\" /><templateId root=\"2.16.840.1.113883.10.20.1.18\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1\" extension=\"allergy\" /><templateId root=\"2.16.840.1.113883.10.20.1.28\" /><id nullFlavor=\"NA\" /><code code=\"420134006\" codeSystem=\"2.16.840.1.113883.6.96\" codeSystemName=\"SNOMED CT\" displayName=\"Propensity to adverse reactions\" /><text><reference value=\"#nof2\" /></text><statusCode code=\"completed\" /><effectiveTime><low nullFlavor=\"UNK\" /></effectiveTime><value nullFlavor=\"UNK\" xsi:type=\"CD\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /></observation></entryRelationship></act></entry></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.8\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.112\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.19\" /><id root=\"AD835D44-B7C1-11E4-8FA9-D2068206269D\" /><code code=\"10160-0\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"History of Medication Usage\" /><title>Current Medications</title><text><content styleCode=\"flagData\">Please verify all current medications with the patient. </content><br /><content ID=\"nof3\">Not on file</content></text><entry><substanceAdministration classCode=\"SBADM\" moodCode=\"INT\" nullFlavor=\"ASKU\"><templateId root=\"2.16.840.1.113883.10.20.1.24\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.8\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.7\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.7.1\" /><templateId root=\"2.16.840.1.113883.3.88.11.32.8\" /><id nullFlavor=\"NA\" /><text mediaType=\"text/xml\" /><statusCode code=\"completed\" /><effectiveTime xsi:type=\"IVL_TS\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><low nullFlavor=\"UNK\" /><high nullFlavor=\"UNK\" /></effectiveTime><consumable typeCode=\"CSM\"><manufacturedProduct classCode=\"MANU\"><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.7.2\" /><templateId root=\"2.16.840.1.113883.10.20.1.53\" /><templateId root=\"2.16.840.1.113883.3.88.11.32.9\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.8.2\" /><templateId root=\"2.16.840.1.113883.3.249.11.100.13\" /><manufacturedMaterial><code codeSystem=\"2.16.840.1.113883.6.88\" nullFlavor=\"NI\"><originalText><reference value=\"#nof3\" /></originalText></code></manufacturedMaterial></manufacturedProduct></consumable></substanceAdministration></entry></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.11\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.6\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.103\" /><id root=\"AD83F4CA-B7C1-11E4-8FA9-D2068206269D\" /><code code=\"11450-4\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"PROBLEM LIST\" /><title>Active Problems</title><text><paragraph ID=\"nof4\">Not on file</paragraph></text><entry><act classCode=\"ACT\" moodCode=\"EVN\" nullFlavor=\"ASKU\"><templateId root=\"2.16.840.1.113883.10.20.1.27\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5.1\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5.2\" /><templateId root=\"2.16.840.1.113883.3.88.11.32.7\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.7\" /><id nullFlavor=\"NI\" /><code nullFlavor=\"NA\" /><statusCode code=\"active\" /><effectiveTime><low nullFlavor=\"UNK\" /></effectiveTime><entryRelationship inversionInd=\"false\" typeCode=\"SUBJ\"><observation classCode=\"OBS\" moodCode=\"EVN\" nullFlavor=\"ASKU\"><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.5\" /><templateId root=\"2.16.840.1.113883.10.20.1.28\" /><id nullFlavor=\"NI\" /><code code=\"55607006\" codeSystem=\"2.16.840.1.113883.6.96\" codeSystemName=\"SNOMED CT\" displayName=\"Problem\" /><text><reference value=\"#nof4\" /></text><statusCode code=\"completed\" /><effectiveTime><low nullFlavor=\"UNK\" /></effectiveTime><value xsi:type=\"CD\" code=\"64572001\" codeSystem=\"2.16.840.1.113883.6.96\" codeSystemName=\"SNOMED CT\" displayName=\"Disease\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><originalText><reference value=\"#nof4\" /></originalText></value></observation></entryRelationship></act></entry></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.15\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.16\" /><code code=\"29762-2\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Social history\" /><title>Social History</title><text><table><colgroup><col width=\"25%\" /><col width=\"13%\" /><col width=\"12%\" /><col width=\"10%\" /><col width=\"15%\" /><col width=\"25%\" /></colgroup><thead><tr><th>Tobacco Use</th><th>Types</th><th>Packs/Day</th><th>Years Used</th><th>Date</th><th>Comments</th></tr></thead><tbody><tr><td>Unknown if ever smoked</td><td /><td>0</td><td>0</td><td /><td /></tr></tbody></table></text><entry><observation classCode=\"OBS\" moodCode=\"EVN\"><templateId root=\"2.16.840.1.113883.10.20.22.4.78\" /><code code=\"ASSERTION\" codeSystem=\"2.16.840.1.113883.5.4\" /><statusCode code=\"completed\" /><effectiveTime><low nullFlavor=\"NASK\" /></effectiveTime><value xsi:type=\"CD\" code=\"266927001\" codeSystem=\"2.16.840.1.113883.6.96\" displayName=\"Unknown if ever smoked\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /></observation></entry></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.10\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.31\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.124\" /><templateId root=\"2.16.840.1.113883.10.20.2.7\" /><code code=\"18776-5\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Treatment plan\" /><title>Plan of Care</title><text><paragraph>Not on file</paragraph></text></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.14\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.27\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.3.28\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.122\" /><id root=\"ad869bf8-b7c1-11e4-8fa9-d2068206269d\" /><code code=\"30954-2\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"STUDIES SUMMARY\" /><title>Results from 11/18/2014 to 02/18/2015</title><text><list><item><content>Not on file</content></item></list></text><entry><organizer classCode=\"BATTERY\" moodCode=\"EVN\"><templateId root=\"2.16.840.1.113883.10.20.1.32\" /><id nullFlavor=\"NA\" /><code code=\"261665006\" codeSystem=\"2.16.840.1.113883.6.96\" codeSystemName=\"SNOMED CT\" displayName=\"Unknown\" /><statusCode code=\"completed\" /><effectiveTime nullFlavor=\"UNK\" /><component><observation classCode=\"OBS\" moodCode=\"EVN\"><templateId root=\"2.16.840.1.113883.10.20.1.31\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.15.1\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.13\" /><id nullFlavor=\"NA\" /><code code=\"261665006\" codeSystem=\"2.16.840.1.113883.6.96\" codeSystemName=\"SNOMED CT\" displayName=\"Unknown\" /><text><reference nullFlavor=\"UNK\" /></text><statusCode code=\"completed\" /><effectiveTime nullFlavor=\"UNK\"><low nullFlavor=\"UNK\" /></effectiveTime><value nullFlavor=\"NA\" xsi:type=\"CD\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /><referenceRange><observationRange><text /></observationRange></referenceRange></observation></component><component><procedure classCode=\"PROC\" moodCode=\"EVN\"><templateId root=\"2.16.840.1.113883.10.20.1.29\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.19\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.17\" /><id nullFlavor=\"NA\" /><code nullFlavor=\"NA\"><originalText><reference nullFlavor=\"UNK\" /></originalText></code><text><reference nullFlavor=\"UNK\" /></text><statusCode code=\"completed\" /><effectiveTime nullFlavor=\"UNK\"><low nullFlavor=\"UNK\" /></effectiveTime></procedure></component></organizer></entry></section></component><component><section><templateId root=\"2.16.840.1.113883.10.20.1.9\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7\" /><templateId root=\"2.16.840.1.113883.3.88.11.83.101.1\" /><code code=\"48768-6\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Payment Sources\" /><title>Insurance</title><text><table><colgroup><col width=\"25%\" /><col width=\"10%\" /><col width=\"15%\" /><col width=\"10%\" /><col width=\"15%\" /><col width=\"25%\" /></colgroup><thead><tr><th>Payer</th><th>Benefit Plan / Group</th><th>Subscriber ID</th><th>Type</th><th>Phone</th><th>Address</th><th /></tr></thead><tbody><tr ID=\"coverage7\"><td>BPU INSURANCE</td><td>BPU HI OPT DENTAL / BPU ELECTRONICS EAST DENTAL CHOICE 1</td><td>85007804400</td><td>HMO</td><td>+1-608-555-9878</td><td><paragraph>5213 TOKAY BLVD</paragraph><paragraph>MADISON, WI 53715</paragraph></td></tr></tbody></table></text><entry><act classCode=\"ACT\" moodCode=\"DEF\"><templateId root=\"2.16.840.1.113883.10.20.1.20\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.17\" /><id root=\"1.2.840.114350.1.13.5325.1.7.2.678671\" extension=\"4571\" /><code code=\"48768-6\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"Payment sources\" /><statusCode code=\"completed\" /><entryRelationship typeCode=\"COMP\"><act classCode=\"ACT\" moodCode=\"EVN\"><templateId root=\"2.16.840.1.113883.10.20.1.26\" /><templateId root=\"1.3.6.1.4.1.19376.1.5.3.1.4.18\" /><templateId root=\"2.16.840.1.113883.3.249.11.100.7\" /><id root=\"1.2.840.114350.1.13.5325.1.7.2.698080\" extension=\"74\" /><code code=\"EHCPOL\" codeSystem=\"2.16.840.1.113883.5.4\" displayName=\"extended healthcare\" /><statusCode code=\"completed\" /><performer typeCode=\"PRF\"><assignedEntity classCode=\"ASSIGNED\"><id root=\"1.2.840.114350.1.13.5325.1.7.2.698077\" extension=\"14431443\" /><id root=\"2.16.840.1.113883.12.86\" extension=\"PI\" /><addr><streetAddressLine>5213 TOKAY BLVD</streetAddressLine><city>MADISON</city><state>WI</state><postalCode>53715</postalCode></addr><telecom value=\"+1-608-555-9878\" /><representedOrganization classCode=\"ORG\"><name>BPU INSURANCE</name><telecom value=\"+1-608-555-9878\" /><addr><streetAddressLine>5213 TOKAY BLVD</streetAddressLine><city>MADISON</city><state>WI</state><postalCode>53715</postalCode></addr></representedOrganization></assignedEntity></performer><participant typeCode=\"COV\"><participantRole><id root=\"2.16.840.1.113883.3.249.13\" extension=\"85007804400\" /></participantRole></participant></act></entryRelationship></act></entry></section></component></structuredBody></component></ClinicalDocument>";
		String validationObjective = "170.315(b)(1)";
		String referenceFileName = "CP_Sample1.pdf";		
	
		ArrayList<RefCCDAValidationResult> results = ReferenceCCDAValidator.validateCCDAWithReferenceFileName(ccdaFile, referenceFileName, validationObjective);
		System.out.println(results);
	}
	
	
}
